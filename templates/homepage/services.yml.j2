# Infrastructure Services
{% if 'traefik' in enabled_services %}
- Traefik:
    icon: traefik.png
    href: https://traefik.{{ domain }}
    description: Reverse Proxy
    widget:
      type: traefik
      url: http://traefik:8080
      key: {{ vault_homepage_api_keys.traefik }}
{% endif %}

{% if 'authentik' in enabled_services %}
- Authentik:
    icon: authentik.png
    href: https://auth.{{ domain }}
    description: Authentication
    widget:
      type: authentik
      url: http://authentik:9000
      key: {{ vault_homepage_api_keys.authentik }}
{% endif %}

{% if 'portainer' in enabled_services %}
- Portainer:
    icon: portainer.png
    href: https://portainer.{{ domain }}
    description: Container Management
    widget:
      type: portainer
      url: http://portainer:9000
      key: {{ vault_homepage_api_keys.portainer }}
{% endif %}

# Monitoring Stack
{% if monitoring_enabled | default(true) %}
{% if 'grafana' in enabled_services %}
- Grafana:
    icon: grafana.png
    href: https://grafana.{{ domain }}
    description: Metrics Dashboard
    widget:
      type: grafana
      url: http://grafana:3000
      key: {{ vault_homepage_api_keys.grafana }}
{% endif %}

{% if 'prometheus' in enabled_services %}
- Prometheus:
    icon: prometheus.png
    href: https://prometheus.{{ domain }}
    description: Metrics Collection
    widget:
      type: prometheus
      url: http://prometheus:9090
{% endif %}

{% if 'influxdb' in enabled_services %}
- InfluxDB:
    icon: influxdb.png
    href: https://influxdb.{{ domain }}
    description: Time Series Database
    widget:
      type: influxdb
      url: http://influxdb:8086
      key: {{ vault_homepage_api_keys.influxdb }}
{% endif %}

{% if 'loki' in enabled_services %}
- Loki:
    icon: loki.png
    href: https://loki.{{ domain }}
    description: Log Aggregation
    widget:
      type: loki
      url: http://loki:3100
{% endif %}

{% if 'alertmanager' in enabled_services %}
- Alertmanager:
    icon: alertmanager.png
    href: https://alertmanager.{{ domain }}
    description: Alert Management
    widget:
      type: alertmanager
      url: http://alertmanager:9093
{% endif %}

{% if 'blackbox_exporter' in enabled_services %}
- Blackbox Exporter:
    icon: blackbox.png
    href: https://blackbox.{{ domain }}
    description: Blackbox Monitoring
    widget:
      type: blackbox
      url: http://blackbox-exporter:9115
{% endif %}

{% if 'telegraf' in enabled_services %}
- Telegraf:
    icon: telegraf.png
    href: https://telegraf.{{ domain }}
    description: Metrics Collection
    widget:
      type: telegraf
      url: http://telegraf:8125
{% endif %}
{% endif %}

# Media Stack
{% if media_enabled | default(true) %}
{% if 'jellyfin' in enabled_services %}
- Jellyfin:
    icon: jellyfin.png
    href: https://jellyfin.{{ domain }}
    description: Media Server
    widget:
      type: jellyfin
      url: http://jellyfin:8096
      key: {{ vault_homepage_api_keys.jellyfin }}
{% endif %}

{% if 'emby' in enabled_services %}
- Emby:
    icon: emby.png
    href: https://emby.{{ domain }}
    description: Media Server
    widget:
      type: emby
      url: http://emby:8096
      key: {{ vault_homepage_api_keys.emby }}
{% endif %}

{% if 'sonarr' in enabled_services %}
- Sonarr:
    icon: sonarr.png
    href: https://sonarr.{{ domain }}
    description: TV Show Management
    widget:
      type: sonarr
      url: http://sonarr:8989
      key: {{ vault_homepage_api_keys.sonarr }}
{% endif %}

{% if 'radarr' in enabled_services %}
- Radarr:
    icon: radarr.png
    href: https://radarr.{{ domain }}
    description: Movie Management
    widget:
      type: radarr
      url: http://radarr:7878
      key: {{ vault_homepage_api_keys.radarr }}
{% endif %}

{% if 'lidarr' in enabled_services %}
- Lidarr:
    icon: lidarr.png
    href: https://lidarr.{{ domain }}
    description: Music Management
    widget:
      type: lidarr
      url: http://lidarr:8686
      key: {{ vault_homepage_api_keys.lidarr }}
{% endif %}

{% if 'readarr' in enabled_services %}
- Readarr:
    icon: readarr.png
    href: https://readarr.{{ domain }}
    description: Book Management
    widget:
      type: readarr
      url: http://readarr:8787
      key: {{ vault_homepage_api_keys.readarr }}
{% endif %}

{% if 'prowlarr' in enabled_services %}
- Prowlarr:
    icon: prowlarr.png
    href: https://prowlarr.{{ domain }}
    description: Indexer Management
    widget:
      type: prowlarr
      url: http://prowlarr:9696
      key: {{ vault_homepage_api_keys.prowlarr }}
{% endif %}

{% if 'bazarr' in enabled_services %}
- Bazarr:
    icon: bazarr.png
    href: https://bazarr.{{ domain }}
    description: Subtitle Management
    widget:
      type: bazarr
      url: http://bazarr:6767
      key: {{ vault_homepage_api_keys.bazarr }}
{% endif %}

{% if 'tautulli' in enabled_services %}
- Tautulli:
    icon: tautulli.png
    href: https://tautulli.{{ domain }}
    description: Media Statistics
    widget:
      type: tautulli
      url: http://tautulli:8181
      key: {{ vault_homepage_api_keys.tautulli }}
{% endif %}

{% if 'overseerr' in enabled_services %}
- Overseerr:
    icon: overseerr.png
    href: https://overseerr.{{ domain }}
    description: Media Requests
    widget:
      type: overseerr
      url: http://overseerr:5055
      key: {{ vault_homepage_api_keys.overseerr }}
{% endif %}

{% if 'pulsarr' in enabled_services %}
- Pulsarr:
    icon: pulsarr.png
    href: https://pulsarr.{{ domain }}
    description: Media Requests
    widget:
      type: pulsarr
      url: http://pulsarr:8080
      key: {{ vault_homepage_api_keys.pulsarr }}
{% endif %}

{% if 'komga' in enabled_services %}
- Komga:
    icon: komga.png
    href: https://komga.{{ domain }}
    description: Comic Management
    widget:
      type: komga
      url: http://komga:8080
      key: {{ vault_homepage_api_keys.komga }}
{% endif %}

{% if 'audiobookshelf' in enabled_services %}
- Audiobookshelf:
    icon: audiobookshelf.png
    href: https://audiobookshelf.{{ domain }}
    description: Audiobook Management
    widget:
      type: audiobookshelf
      url: http://audiobookshelf:13378
      key: {{ vault_homepage_api_keys.audiobookshelf }}
{% endif %}

{% if 'calibre-web' in enabled_services %}
- Calibre Web:
    icon: calibre.png
    href: https://calibre.{{ domain }}
    description: E-book Management
    widget:
      type: calibre
      url: http://calibre-web:8083
      key: {{ vault_homepage_api_keys.calibre }}
{% endif %}

{% if 'tdarr' in enabled_services %}
- Tdarr:
    icon: tdarr.png
    href: https://tdarr.{{ domain }}
    description: Media Transcoding
    widget:
      type: tdarr
      url: http://tdarr:8265
      key: {{ vault_homepage_api_keys.tdarr }}
{% endif %}

{% if 'sabnzbd' in enabled_services %}
- SABnzbd:
    icon: sabnzbd.png
    href: https://sabnzbd.{{ domain }}
    description: Usenet Downloader
    widget:
      type: sabnzbd
      url: http://sabnzbd:8080
      key: {{ vault_homepage_api_keys.sabnzbd }}
{% endif %}

{% if 'qbittorrent' in enabled_services %}
- qBittorrent:
    icon: qbittorrent.png
    href: https://qbittorrent.{{ domain }}
    description: Torrent Downloader
    widget:
      type: qbittorrent
      url: http://qbittorrent:8080
      key: {{ vault_homepage_api_keys.qbittorrent }}
{% endif %}
{% endif %}

# Storage & Databases
{% if 'postgresql' in enabled_services %}
- PostgreSQL:
    icon: postgresql.png
    href: https://postgresql.{{ domain }}
    description: Database
    widget:
      type: postgresql
      url: postgresql://postgres:5432
      key: {{ vault_homepage_api_keys.postgresql }}
{% endif %}

{% if 'mariadb' in enabled_services %}
- MariaDB:
    icon: mariadb.png
    href: https://mariadb.{{ domain }}
    description: Database
    widget:
      type: mariadb
      url: mariadb://mariadb:3306
      key: {{ vault_homepage_api_keys.mariadb }}
{% endif %}

{% if 'redis' in enabled_services %}
- Redis:
    icon: redis.png
    href: https://redis.{{ domain }}
    description: Cache
    widget:
      type: redis
      url: redis://redis:6379
{% endif %}

{% if 'elasticsearch' in enabled_services %}
- Elasticsearch:
    icon: elasticsearch.png
    href: https://elasticsearch.{{ domain }}
    description: Search Engine
    widget:
      type: elasticsearch
      url: http://elasticsearch:9200
{% endif %}

{% if 'kibana' in enabled_services %}
- Kibana:
    icon: kibana.png
    href: https://kibana.{{ domain }}
    description: Analytics Dashboard
    widget:
      type: kibana
      url: http://kibana:5601
{% endif %}

{% if 'nextcloud' in enabled_services %}
- Nextcloud:
    icon: nextcloud.png
    href: https://nextcloud.{{ domain }}
    description: File Storage
    widget:
      type: nextcloud
      url: http://nextcloud:8080
      key: {{ vault_homepage_api_keys.nextcloud }}
{% endif %}

{% if 'samba' in enabled_services %}
- Samba:
    icon: samba.png
    href: https://samba.{{ domain }}
    description: File Sharing
    widget:
      type: samba
      url: smb://samba:445
{% endif %}

{% if 'syncthing' in enabled_services %}
- Syncthing:
    icon: syncthing.png
    href: https://syncthing.{{ domain }}
    description: File Sync
    widget:
      type: syncthing
      url: http://syncthing:8384
      key: {{ vault_homepage_api_keys.syncthing }}
{% endif %}

# Security & Network
{% if 'crowdsec' in enabled_services %}
- Crowdsec:
    icon: crowdsec.png
    href: https://crowdsec.{{ domain }}
    description: Security
    widget:
      type: crowdsec
      url: http://crowdsec:8080
      key: {{ vault_homepage_api_keys.crowdsec }}
{% endif %}

{% if 'fail2ban' in enabled_services %}
- Fail2ban:
    icon: fail2ban.png
    href: https://fail2ban.{{ domain }}
    description: Security
    widget:
      type: fail2ban
      url: http://fail2ban:8080
{% endif %}

{% if 'vault' in enabled_services %}
- Vault:
    icon: vault.png
    href: https://vault.{{ domain }}
    description: Secrets Management
    widget:
      type: vault
      url: http://vault:8200
      key: {{ vault_homepage_api_keys.vault }}
{% endif %}

{% if 'wireguard' in enabled_services %}
- Wireguard:
    icon: wireguard.png
    href: https://wireguard.{{ domain }}
    description: VPN
    widget:
      type: wireguard
      url: http://wireguard:51820
{% endif %}

{% if 'nginx' in enabled_services %}
- Nginx:
    icon: nginx.png
    href: https://nginx.{{ domain }}
    description: Web Server
    widget:
      type: nginx
      url: http://nginx:80
{% endif %}

# Automation & Smart Home
{% if automation_enabled | default(true) %}
{% if 'homeassistant' in enabled_services %}
- Home Assistant:
    icon: homeassistant.png
    href: https://homeassistant.{{ domain }}
    description: Home Automation
    widget:
      type: homeassistant
      url: http://homeassistant:8123
      key: {{ vault_homepage_api_keys.homeassistant }}
{% endif %}

{% if 'zigbee2mqtt' in enabled_services %}
- Zigbee2MQTT:
    icon: zigbee2mqtt.png
    href: https://zigbee2mqtt.{{ domain }}
    description: Zigbee Gateway
    widget:
      type: zigbee2mqtt
      url: http://zigbee2mqtt:8080
{% endif %}

{% if 'mosquitto' in enabled_services %}
- Mosquitto:
    icon: mosquitto.png
    href: https://mosquitto.{{ domain }}
    description: MQTT Broker
    widget:
      type: mosquitto
      url: mqtt://mosquitto:1883
{% endif %}
{% endif %}

# Development & CI/CD
{% if 'portainer' in enabled_services %}
- Portainer:
    icon: portainer.png
    href: https://portainer.{{ domain }}
    description: Container Management
    widget:
      type: portainer
      url: http://portainer:9000
      key: {{ vault_homepage_api_keys.portainer }}
{% endif %}

# Backup Services
{% if backup_enabled | default(true) %}
{% if 'kopia' in enabled_services %}
- Kopia:
    icon: kopia.png
    href: https://kopia.{{ domain }}
    description: Backup System
    widget:
      type: kopia
      url: http://kopia:51515
      key: {{ vault_homepage_api_keys.kopia }}
{% endif %}

{% if 'duplicati' in enabled_services %}
- Duplicati:
    icon: duplicati.png
    href: https://duplicati.{{ domain }}
    description: Backup System
    widget:
      type: duplicati
      url: http://duplicati:8200
      key: {{ vault_homepage_api_keys.duplicati }}
{% endif %}
{% endif %}

# Utility Services
{% if 'uptime_kuma' in enabled_services %}
- Uptime Kuma:
    icon: uptimekuma.png
    href: https://uptime.{{ domain }}
    description: Uptime Monitoring
    widget:
      type: uptimekuma
      url: http://uptime-kuma:3001
      key: {{ vault_homepage_api_keys.uptimekuma }}
{% endif %}

{% if 'dashdot' in enabled_services %}
- Dashdot:
    icon: dashdot.png
    href: https://dashdot.{{ domain }}
    description: System Dashboard
    widget:
      type: dashdot
      url: http://dashdot:3001
{% endif %}

{% if 'code_server' in enabled_services %}
- Code Server:
    icon: codeserver.png
    href: https://code.{{ domain }}
    description: Web IDE
    widget:
      type: codeserver
      url: http://code-server:8080
{% endif %}

{% if 'guacamole' in enabled_services %}
- Guacamole:
    icon: guacamole.png
    href: https://guac.{{ domain }}
    description: Remote Desktop
    widget:
      type: guacamole
      url: http://guacamole:8080
      key: {{ vault_homepage_api_keys.guacamole }}
{% endif %}

{% if 'heimdall' in enabled_services %}
- Heimdall:
    icon: heimdall.png
    href: https://heimdall.{{ domain }}
    description: Application Dashboard
    widget:
      type: heimdall
      url: http://heimdall:80
{% endif %}

{% if 'homarr' in enabled_services %}
- Homarr:
    icon: homarr.png
    href: https://homarr.{{ domain }}
    description: Dashboard
    widget:
      type: homarr
      url: http://homarr:7575
{% endif %}

{% if 'requestrr' in enabled_services %}
- Requestrr:
    icon: requestrr.png
    href: https://requestrr.{{ domain }}
    description: Media Requests
    widget:
      type: requestrr
      url: http://requestrr:4545
      key: {{ vault_homepage_api_keys.requestrr }}
{% endif %}

{% if 'unmanic' in enabled_services %}
- Unmanic:
    icon: unmanic.png
    href: https://unmanic.{{ domain }}
    description: Media Processing
    widget:
      type: unmanic
      url: http://unmanic:8888
      key: {{ vault_homepage_api_keys.unmanic }}
{% endif %} 