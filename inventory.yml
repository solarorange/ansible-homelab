# Enhanced Watchtower Inventory
# Configure your Proxmox VM details here

# Single VM deployment (recommended for most Watchtower deployments)
[watchtower_all]
watchtower ansible_host=192.168.40.100 ansible_user=watchtower

# Group all Watchtower servers
[watchtower:children]
watchtower_all

# Common variables for all Watchtower servers
[watchtower:vars]
# SSH Configuration
ansible_ssh_private_key_file=~/.ssh/watchtower_key
ansible_ssh_common_args='-o StrictHostKeyChecking=accept-new'
ansible_python_interpreter=/usr/bin/python3

# Connection settings
ansible_connection=ssh
ansible_ssh_pipelining=true
ansible_ssh_retries=3

# Privilege escalation
ansible_become=true
ansible_become_method=sudo
ansible_become_user=root

# Performance tuning
ansible_gather_timeout=30
ansible_timeout=300

# Network segmentation
network_segments:
  - name: watchtower
    subnet: 192.168.40.0/24
    gateway: 192.168.40.1

# Resource limits
resource_limits:
  cpu_shares: 1024
  memory_limit: 2G
  memory_swap: 4G
  memory_reservation: 1G
  cpus: 2

# Service configuration
enabled_services:
  - traefik
  - authentik
  - portainer
  - monitoring_stack
  - media_stack
  - security_stack
  - automation_stack

# Feature toggles
monitoring_enabled: true
media_enabled: true
security_enhanced: true
automation_enabled: true

# Example configurations for different deployment scenarios:

# Multi-VM deployment (for larger setups)
# [watchtower_core]
# watchtower-core ansible_host=192.168.40.100 ansible_user=watchtower
# 
# [watchtower_monitoring]
# watchtower-mon ansible_host=192.168.40.101 ansible_user=watchtower
# 
# [watchtower_automation]
# watchtower-auto ansible_host=192.168.40.102 ansible_user=watchtower
# 
# [watchtower_security]
# watchtower-sec ansible_host=192.168.40.103 ansible_user=watchtower

# Cloud deployment (VPS/dedicated servers)
# [watchtower_cloud]
# watchtower ansible_host=your.domain.com ansible_user=ubuntu ansible_port=22

# Development/testing environment
# [watchtower_dev]
# dev ansible_host=127.0.0.1 ansible_user=vagrant ansible_port=2222

---
all:
  children:
    homelab_core:
      hosts:
        core1:
          ansible_host: 192.168.40.100
          ansible_user: homelab
        core2:
          ansible_host: 192.168.40.101
          ansible_user: homelab
        core3:
          ansible_host: 192.168.40.102
          ansible_user: homelab
        core4:
          ansible_host: 192.168.40.103
          ansible_user: homelab
      vars:
        ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
        ansible_python_interpreter: /usr/bin/python3

    ansible_control:
      hosts:
        ansible:
          ansible_host: 192.168.40.99
          ansible_user: homelab
      vars:
        ansible_connection: local
