---
- name: Install storage management tools
  ansible.builtin.package:
    name:
      - lvm2
      - parted
      - gdisk
      - smartmontools
      - hdparm
      - iotop
      - ncdu
      - tree
      - rsync
      - rclone
      - fuse
      - samba
      - syncthing
      - docker-compose
      - curl
      - jq
      - cron
      - logrotate
    state: present

- name: Ensure required directories exist
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: "0755"
  loop:
    - "{{ docker_dir }}"
    - "{{ data_dir }}"
    - "{{ config_dir }}"
    - "{{ backup_dir }}"
    - "{{ logs_dir }}"
    - "{{ scripts_dir }}"
    - "/home/{{ username }}/.cache"
    - "/home/{{ username }}/.config"
