# Linkwarden Loki Configuration
# Log aggregation configuration for Linkwarden

scrape_configs:
  - job_name: 'linkwarden'
    static_configs:
      - targets:
          - '{{ linkwarden_app_container_name }}:{{ linkwarden_port }}'
        labels:
          service: 'linkwarden'
          instance: '{{ inventory_hostname }}'
          __path__: '/var/log/linkwarden/*.log'
    pipeline_stages:
      - json:
          expressions:
            timestamp: timestamp
            level: level
            message: message
            service: service
      - labels:
          level:
          service:
      - timestamp:
          source: timestamp
          format: RFC3339 