---
# Utilities Stack Prerequisites

- name: Ensure Docker is installed
  ansible.builtin.package:
    name: docker
    state: present

- name: Ensure Docker Compose is installed
  ansible.builtin.package:
    name: docker-compose
    state: present

- name: Ensure required Python modules are present
  ansible.builtin.pip:
    name:
      - docker
      - docker-compose
    state: present

- name: Ensure user is in docker group
  ansible.builtin.user:
    name: "{{ username }}"
    groups: docker
    append: yes

- name: Start and enable Docker service
  ansible.builtin.service:
    name: docker
    state: started
    enabled: true

  tags: [utilities, prerequisites] 