# DumbAssets Backup Monitoring Rules
# Generated by Ansible - Do not edit manually

groups:
  - name: dumbassets-backup
    rules:
      # Backup Success Metric
      - record: dumbassets_backup_last_success_timestamp_seconds
        expr: time() * (dumbassets_backup_success == 1)
      
      # Backup Failure Alert
      - alert: DumbAssetsBackupFailure
        expr: dumbassets_backup_last_success_timestamp_seconds < (time() - 86400)
        for: 1h
        labels:
          severity: warning
          service: dumbassets-backup
        annotations:
          summary: "DumbAssets backup failure"
          description: "DumbAssets backup has not completed successfully in the last 24 hours"
          url: "https://{{ dumbassets_subdomain }}.{{ domain }}"
      
      # Backup Size Monitoring
      - alert: DumbAssetsBackupSizeAnomaly
        expr: dumbassets_backup_size_bytes > 1073741824  # 1GB
        for: 5m
        labels:
          severity: warning
          service: dumbassets-backup
        annotations:
          summary: "DumbAssets backup size anomaly"
          description: "DumbAssets backup size is larger than expected (>1GB)"
          url: "https://{{ dumbassets_subdomain }}.{{ domain }}" 