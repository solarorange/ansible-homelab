# Pezzo Environment Configuration
# Production-ready environment variables for Pezzo deployment

# Database Configuration
DATABASE_URL=postgresql://{{ pezzo_database_user }}:$(cat /run/secrets/DB_PASSWORD)@{{ pezzo_database_host }}:{{ pezzo_database_port }}/{{ pezzo_database_name }}

# Redis Configuration
REDIS_URL=redis://{{ pezzo_redis_host }}:{{ pezzo_redis_port }}

# ClickHouse Configuration
CLICKHOUSE_HOST={{ pezzo_clickhouse_host }}
CLICKHOUSE_PORT={{ pezzo_clickhouse_port }}
CLICKHOUSE_USER={{ pezzo_clickhouse_user }}
CLICKHOUSE_PASSWORD_FILE=/run/secrets/CLICKHOUSE_PASSWORD

# SuperTokens Configuration
SUPERTOKENS_CONNECTION_URI=http://pezzo-supertokens:3567

# Local KMS Configuration
KMS_LOCAL_ENDPOINT=http://pezzo-local-kms:9981

# Application Configuration
NODE_ENV=production
TZ={{ timezone }}
PINO_PRETTIFY=true

# Console Configuration
NX_BASE_API_URL=http://pezzo-server:3000
NX_SUPERTOKENS_API_DOMAIN=http://pezzo-server:3000
NX_SUPERTOKENS_WEBSITE_DOMAIN=http://pezzo-console:8080
NX_DEBUG_MODE=false

# Security Configuration
{% if pezzo_auth_enabled %}
AUTH_ENABLED=true
AUTH_METHOD={{ pezzo_auth_method }}
{% else %}
AUTH_ENABLED=false
{% endif %}

# Monitoring Configuration
{% if pezzo_monitoring_enabled %}
MONITORING_ENABLED=true
PROMETHEUS_ENABLED={{ pezzo_prometheus_enabled | lower }}
LOKI_ENABLED={{ pezzo_loki_enabled | lower }}
{% else %}
MONITORING_ENABLED=false
{% endif %}

# Logging Configuration
LOG_LEVEL={{ pezzo_log_level }}
LOG_FORMAT={{ pezzo_log_format }} 