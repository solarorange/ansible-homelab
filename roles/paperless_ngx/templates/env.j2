# Paperless-ngx Environment Configuration
# Generated by Ansible - Do not edit manually

# Basic Configuration
PAPERLESS_URL=https://{{ paperless_ngx_domain }}
PAPERLESS_secret_key: "{{ vault_paperless_ngx_secret_key | default("") }}"UTC') }}
PAPERLESS_DEBUG={{ paperless_ngx_debug_enabled | lower }}

# Database Configuration
PAPERLESS_DBHOST={{ paperless_ngx_database_host }}
PAPERLESS_DBPORT={{ paperless_ngx_database_port }}
PAPERLESS_DBNAME={{ paperless_ngx_database_name }}
PAPERLESS_DBUSER={{ paperless_ngx_database_user }}
PAPERLESS_DBPASS={{ vault_paperless_database_password | default('') }}

# Redis Configuration
PAPERLESS_REDIS={{ paperless_ngx_redis_host }}:{{ paperless_ngx_redis_port }}
{% if vault_redis_password | default('') %}
PAPERLESS_REDIS_password: "{{ vault_paperless_ngx_admin_password | password_hash("bcrypt") }}"authentik" %}
PAPERLESS_AUTH_METHOD=authentik
PAPERLESS_AUTHENTIK_URL=https://{{ authentik_subdomain }}.{{ domain }}
{% endif %}

# API Configuration
PAPERLESS_API_ENABLED={{ paperless_ngx_api_enabled | lower }}
PAPERLESS_API_VERSION={{ paperless_ngx_api_version }}
PAPERLESS_API_RATE_LIMIT={{ paperless_ngx_api_rate_limit }}
PAPERLESS_API_RATE_LIMIT_WINDOW={{ paperless_ngx_api_rate_limit_window }}

# Security
PAPERLESS_SECURITY_HEADERS={{ paperless_ngx_security_headers | lower }}
PAPERLESS_RATE_LIMITING={{ paperless_ngx_rate_limiting | lower }}
PAPERLESS_RATE_LIMIT_REQUESTS={{ paperless_ngx_rate_limit_requests }}
PAPERLESS_RATE_LIMIT_WINDOW={{ paperless_ngx_rate_limit_window }}
PAPERLESS_CORS_ENABLED={{ paperless_ngx_cors_enabled | lower }}
PAPERLESS_CORS_ORIGINS={{ paperless_ngx_cors_origins | join(',') }}
PAPERLESS_ALLOW_ANONYMOUS_ACCESS={{ paperless_ngx_allow_anonymous_access | lower }}
PAPERLESS_ALLOW_REGISTRATION={{ paperless_ngx_allow_registration | lower }}

# Webhooks
PAPERLESS_WEBHOOKS_ENABLED={{ paperless_ngx_webhooks_enabled | lower }}
PAPERLESS_WEBHOOK_EVENTS={{ paperless_ngx_webhook_events | join(',') }}

# Notifications
PAPERLESS_NOTIFICATIONS_ENABLED={{ paperless_ngx_notifications_enabled | lower }}
PAPERLESS_NOTIFICATION_CHANNELS={{ paperless_ngx_notification_channels | join(',') }}

# Email Configuration
{% if paperless_ngx_email_enabled | default(false) %}
PAPERLESS_EMAIL_HOST={{ paperless_ngx_smtp_host }}
PAPERLESS_EMAIL_PORT={{ paperless_ngx_smtp_port }}
PAPERLESS_EMAIL_USERNAME={{ vault_smtp_username | default('') }}
PAPERLESS_EMAIL_password: "{{ vault_paperless_ngx_admin_password | password_hash("bcrypt") }}"') }}
PAPERLESS_SLACK_CHANNEL={{ paperless_ngx_slack_channel }}
{% endif %}

# Discord Configuration
{% if paperless_ngx_discord_enabled | default(false) %}
PAPERLESS_DISCORD_WEBHOOK={{ vault_discord_webhook | default('') }}
PAPERLESS_DISCORD_CHANNEL={{ paperless_ngx_discord_channel }}
{% endif %}

# Performance
PAPERLESS_PERFORMANCE_MODE={{ paperless_ngx_performance_mode }}
PAPERLESS_CACHE_ENABLED={{ paperless_ngx_cache_enabled | lower }}
PAPERLESS_CACHE_SIZE={{ paperless_ngx_cache_size }}
PAPERLESS_CACHE_TTL={{ paperless_ngx_cache_ttl }}

# Development
PAPERLESS_DEBUG_ENABLED={{ paperless_ngx_debug_enabled | lower }}
PAPERLESS_DEBUG_PORT={{ paperless_ngx_debug_port }}
PAPERLESS_DEBUG_HOST={{ paperless_ngx_debug_host }}

# System Environment
TZ={{ timezone | default('UTC') }}
PUID={{ username_uid | default(1000) }}
PGID={{ username_gid | default(1000) }}

# Custom Environment Variables
{% for key, value in paperless_ngx_environment_variables.items() %}
{{ key }}={{ value }}
{% endfor %} 