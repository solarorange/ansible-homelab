#!/bin/bash
# Redis Backup Script
BACKUP_DIR="{{ docker_dir }}/redis/backup"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/redis_backup_$TIMESTAMP.rdb"
mkdir -p "$BACKUP_DIR"
docker exec {{ redis_container_name }} redis-cli -a {{ redis_password }} save
cp {{ docker_dir }}/redis/data/dump.rdb "$BACKUP_FILE"
find "$BACKUP_DIR" -name "redis_backup_*.rdb" -mtime +7 -delete
echo "Backup created: $BACKUP_FILE" 